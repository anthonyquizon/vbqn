âŸ¨âŸ¨TrimâŸ©â‡strings, nsâŸ© â†â€¢Import "util.bqn"
init_c  â† "../lib.so" â€¢FFI ""â€¿"init"
input_c â† "../lib.so" â€¢FFI "a"â€¿"input"

p â† âŸ¨âŸ© â€¢HashMap âŸ¨âŸ© # inspection points

Init_c âŸ¨âŸ©
replâ†â€¢ReBqn {replâ‡"loose"}

Listâ†{ ğ•© }
Râ†{ ğ•© }

optsâ†â‰[
  ")l"â€¿List
  ")r"â€¿R
]

Runâ‡{ ğ•Š: { ğ•Š:
  lâ†Input_c âŸ¨âŸ© 

  # run cancel
  â€¢ExitâŸ(l=0) 0

  # run opts
  nâ†â‰ Â¨âŠopts â‹„ mâ†âˆ¾n{ğ•©â·ğ•¨â†‘l}Â¨âŠopts â‹„ {fâ†1âŠ‘ğ•©â‹„F l}Ë˜m/â‰opts

  # run repl
  {ğ•Š:Repl Â¯2â†“l}âŸ((0<â‰ l)âˆ§Â¬âˆ¨Â´m) @ # drop 2 due to unknown characters
}â€¢_while_ 1 1 }

