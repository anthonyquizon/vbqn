runtime â†    â€¢Import "./rt.bqn"     # TODO replace runtime with host runtime - replacement mask with array of cbqn functions
gl      â†    â€¢Import "./glyphs.bqn"
compile â† gl â€¢Import "./c.bqn"
vm      â†    â€¢Import "./vm.bqn"
global  â†    â€¢Import "./global.bqn"

Import â† {
  srcâ†â€¢file.Chars global.cwdâˆ¾ğ•©
  câ† âŸ¨runtime, { System ğ•© }, âŸ¨âŸ©âŸ© Compile src
  VM c
}
# Lookup table
systableâ† âˆ¾<Ë˜â‹ˆË˜â‰>âŸ¨
    "type"â€¿â€¢Type
     "out"â€¿â€¢Out
    "show"â€¿â€¢Show
  "import"â€¿Import
âŸ©

FindSys â† {
  i â† ğ•¨âŠğ•©
  { ! âˆ¾âŸ¨"Unknown system value",(1â‰ â‰ ğ•©)/"s",":"âŸ©âˆ¾" â€¢"âŠ¸âˆ¾Â¨ğ•© }âˆ˜/âŸœğ•©âŸ(âˆ¨Â´) i=â‰ ğ•¨
  i
}

system â‡ { ğ•¨âŠ¸FindSysâŠğ•©Ë™ }Â´systable

