gl      â†    â€¢Import "./glyphs.bqn"
compile â† gl â€¢Import "./c.bqn"
vm      â†    â€¢Import "./vm.bqn"
âŸ¨ctxâŸ©   â†    â€¢Import "./s.bqn"

# Store cwd and src in stack and run compiler with provided runtime and system functions
Errorâ† {ğ•Š: 
  â€¢Out "Error:"âˆ¾â€¢CurrentError@
  â€¢Out "TODO show stack trace and stop recording"
}

Runâ‡{
  sysâ€¿rt ğ•Š ğ•©:
    âŸ¨srcâŸ©â†ctx.Push ğ•©
    c â† âŸ¨rt, { Sys ğ•© }, âŸ¨âŸ©âŸ© Compile src
    r â† VMâŠError c
    ctx.Pop 1 
    r
}


